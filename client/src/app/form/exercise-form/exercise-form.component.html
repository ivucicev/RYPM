<div class="exercise-item" [formGroup]="exercise">
    <h2>{{exercise.get('name').value}}</h2>
    <div class="exercise-settings-container">
        <span> {{ 'rest' | translate }}</span>
        <ion-icon name="timer-outline"></ion-icon>
        <ion-select formControlName="restDuration" interface="popover" class="rest-duration-select">
            @for (option of durationOptions; track option.value) {
            <ion-select-option [value]="option.value">
                {{ option?.value | duration }}
            </ion-select-option>
            }
        </ion-select>

        <ion-button fill="clear" class="notes-button" (click)="onOpenNotes()">
            <ion-icon name="document-text-outline"
                [color]="exercise.get('notes').value ? 'primary' : 'dark'"></ion-icon>
        </ion-button>
    </div>

    <div>
        <div formArrayName="sets">
            @for (set of setsArray.controls; track $index; let setIndex = $index) {
            <ion-row [formGroupName]="setIndex" class="rep-row">
                <ion-col size="5" class="set-number">
                    {{setIndex + 1}}.
                    @switch (set.get('weightType').value) {
                    @case (WeightType.NA) {
                    <ion-note>{{ '-' | translate }}</ion-note>
                    }
                    @default {
                    <ion-input type="number" formControlName="weight" min="1"></ion-input>
                    }
                    }
                    <div class="weight-select">
                        <ion-select formControlName="weightType">
                            <ion-select-option [value]="WeightType.NA">N/A</ion-select-option>
                            <ion-select-option [value]="WeightType.KG">{{ 'kg' | translate }}</ion-select-option>
                            <ion-select-option [value]="WeightType.LB">{{ 'lb' | translate }}</ion-select-option>
                            <ion-select-option [value]="WeightType.BW">{{ 'bw' | translate }}</ion-select-option>
                        </ion-select>
                    </div>
                </ion-col>
                <ion-col size="7">
                    <div>Ã—</div>
                    @switch (set.get('type').value) {
                    @case (RepType.Reps) {
                    <ion-input type="number" formControlName="value" min="1" max="100"></ion-input>
                    }
                    @case (RepType.RepsRange) {
                    <ion-input type="number" formControlName="minValue" min="1" max="100"></ion-input>
                    <ion-note>{{ '-' | translate}}</ion-note>
                    <ion-input type="number" formControlName="maxValue" min="1" max="100"></ion-input>
                    }
                    @case (RepType.Max) {
                    <ion-input type="text" type="none" [value]="'max' | translate" readonly></ion-input>
                    }
                    @case (RepType.Duration) {
                    <ion-input type="number" formControlName="value" min="1" max="3600"></ion-input>
                    {{ 'sec' | translate }}
                    }
                    }
                    <div class="reps-select">
                        <ion-select formControlName="type">
                            <ion-select-option [value]="RepType.Reps">{{ 'reps' | translate }}</ion-select-option>
                            <ion-select-option [value]="RepType.RepsRange">{{ 'reps_range' | translate
                                }}</ion-select-option>
                            <ion-select-option [value]="RepType.Max">{{ 'max' | translate }}</ion-select-option>
                            <ion-select-option [value]="RepType.Duration">{{ 'seconds' |
                                translate}}</ion-select-option>
                        </ion-select>
                    </div>
                </ion-col>
            </ion-row>
            }
        </div>

        <div class="set-buttons">
            <ion-button size="small" fill="none" (click)="removeSet()" [color]="'dark'"
                [disabled]="setsArray.length <= 1">
                <ion-icon slot="start" name="remove"></ion-icon>
                {{ 'set' | translate }}
            </ion-button>
            <ion-button fill="none" size="small" [color]="'dark'" (click)="addSet()">
                <ion-icon slot="start" name="add"></ion-icon>
                {{ 'set' | translate }}
            </ion-button>
        </div>
    </div>
</div>